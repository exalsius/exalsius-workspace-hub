# Test Workspace Helm Chart Values

# DO NOT CHANGE THIS PARAMETER
deploymentNumReplicas: 1

# Deployment configuration

deploymentNamespace: "default"
deploymentImage: "srnbckr/diloco-training:latest"

# Job configuration
deploymentName: "diloco-training-job"
nodes: 2  # Number of nodes for distributed training

# Resource configuration
cpuCores: 1
memoryGb: 16
storageGb: 60
gpuCount: 1

# DiLoCo Training Environment Variables
diloco:
  model: "gpt-neo-x"
  dataset: "c4"
  localSteps: "128"
  lr: "4e-4"
  outerLr: "0.7"
  warmupSteps: "1000"
  totalSteps: "30000"
  perDeviceTrainBatchSize: "32"
  batchSize: "512"
  optimMethod: "sgd"
  quantization: "false"
  checkpointPath: "checkpoint.pth"
  checkpointInterval: "512"
  device: "cuda"
  wandbProjectName: "diloco"
  wandbGroup: "diloco-gptneo-c4"
  heterogeneous: "false"
  compressionDecay: "0.9"
  compressionTopk: "32"
  experimentDescription: "DiLoCo distributed training experiment"
  experimentTags: "diloco,gpt-neo-x,c4"
  seed: "42"
  wandbLogging: "true"
  wandbUserKey: "XXXXXXXXXXXXXXXXX"
  huggingfaceToken: "hf_XXXXXXXXXXXXXXXXX"